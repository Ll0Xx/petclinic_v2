<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Login</title>
    <link rel="stylesheet" th:href="@{/webjars/bootstrap/5.1.3/css/bootstrap.min.css} "/>

<body>
<header th:replace="_fragments.html :: header"></header>

<!-- Tabs navs -->
<ul class="d-flex justify-content-center nav nav-tabs mb-3" id="tabs" role="tablist">
    <li class="nav-item" role="presentation">
        <a class="nav-link active" id="tabs-tab-1" data-mdb-toggle="tab" href="#tabs-tabs-1" role="tab"
           aria-controls="tabs-tabs-1" aria-selected="false">
            Log in
        </a>
    </li>
    <li class="nav-item" role="presentation">
        <a class="nav-link" id="tabs-tab-2" data-mdb-toggle="tab" href="#tabs-tabs-2" role="tab"
                aria-controls="tabs-tabs-2" aria-selected="false">
            Create account
        </a>
    </li>
</ul>
<!-- Tabs navs -->

<!-- Tabs content -->
<div class="d-grid gap-2 col-3 mt-3  mx-auto tab-content" style="margin-top: 3rem" id="tabs-content">
    <div class="tab-pane mt-5 fade show active" id="tabs-tabs-1" role="tabpanel" aria-labelledby="tabs-tab-1">
        <form th:action="@{/perform_login}" method="post">
            <p class="fs-3 text-center">Please login to your account</p>

            <div class="form-floating mb-3">
                <input type="email" name="username" class="form-control" id="login-email" placeholder="Email" required>
                <label for="login-email">Enter email...</label>
            </div>

            <div class="form-floating mb-3">
                <input type="password" name="password" class="form-control" id="login-password" placeholder="Password"
                required>
                <label for="login-password">Enter password...</label>
            </div>

            <div id="login-error-message" class="mt-3 d-none">
                <p class="text-danger">Invalid credentials</p>
            </div>

            <div class="d-grid gap-2">
                <button class="btn btn-primary mb-3" type="submit">Log in</button>
            </div>

        </form>
    </div>
        <div class="tab-pane mt-5 fade" id="tabs-tabs-2" role="tabpanel" aria-labelledby="tabs-tab-2">
            <form id="registerForm" class="needs-validation" th:action="@{/process_register}" th:object="${createUserDto}" method="post">
                <p class="fs-3 text-center">Create new account</p>

                <div class="form-floating mb-3">
                    <input type="email" class="form-control" id="sign-up-email" th:field="*{email}" placeholder="Email"
                           required>
                    <label class="form-label" for="sign-up-email">email@example.com</label>
                </div>

                <div class="form-floating mb-3">
                    <input type="password" class="form-control" id="sign-up-password" th:field="*{password}"
                           placeholder="Password" required>
                    <label for="sign-up-password">Password</label>
                </div>

                <div class="form-floating mb-3">
                    <input type="password" class="form-control" id="sign-up-confirmPassword"
                           th:field="*{confirmPassword}" placeholder="Confirm password" required>
                    <label for="sign-up-confirmPassword">Confirm password</label>
                </div>

                <div class="form-check mb-3">
                    <input class="form-check-input" type="checkbox"  th:field="*{doctor}" value="" id="isDoctor">
                    <label class="form-check-label" for="isDoctor">
                       Create doctor?
                    </label>
                </div>

                <select id="doctorSpecializationSelector" class="form-select mb-3 d-none" th:field="*{doctorSpecialization}" required>
                    <option value="" selected>Select specializations</option>
                    <option th:each="specialization : ${doctorSpecializationsList}" th:value="${specialization.id}"
                            th:text="${specialization.name}"></option>
                </select>

                <div class="d-grid gap-2 mt-3">
                    <button class="btn btn-primary mb-3" type="submit">Create new user</button>
                </div>

            </form>
        </div>
</div>
<!-- Tabs content -->

</body>

<script th:src="@{/webjars/jquery/3.6.0/jquery.min.js}"></script>
<script th:src="@{/webjars/popper.js/2.9.3/umd/popper.min.js}"></script>
<script th:src="@{/webjars/bootstrap/5.1.3/js/bootstrap.min.js}"></script>
<script th:src="@{assets/tabs.js}"></script>
<script th:src="@{assets/login.js}"></script>

</html>
